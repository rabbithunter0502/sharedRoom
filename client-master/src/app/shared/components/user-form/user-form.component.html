<div class="user-form">
  <h3>Thông tin cá nhân</h3>

  <form *ngIf="form; else loading" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="fullName">Họ và tên</label>
      <input
        type="text"
        class="form-control"
        id="fullName"
        formControlName="fullName"
        placeholder="Nhập địa họ và tên"
        [ngClass]="{
          'is-invalid':
            form.get('fullName').errors &&
            (form.get('fullName').touched || form.get('fullName').dirty)
        }"
      />
      <div
        class="invalid-feedback"
        *ngIf="form.get('fullName').errors?.required"
      >
        Hãy nhập họ và tên.
      </div>
      <div
        class="invalid-feedback"
        *ngIf="form.get('fullName').errors?.minlength"
      >
        Họ và tên phải chứa ít nhất 8 ký tự.
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="text"
        class="form-control"
        id="email"
        formControlName="email"
        placeholder="Nhập địa chỉ email"
        [ngClass]="{
          'is-invalid':
            form.get('email').errors &&
            (form.get('email').touched || form.get('email').dirty)
        }"
      />
      <div class="invalid-feedback" *ngIf="form.get('email').errors?.required">
        Hãy nhập địa chỉ email.
      </div>
      <div class="invalid-feedback" *ngIf="form.get('email').errors?.minlength">
        Email phải chứa ít nhất 8 ký tự.
      </div>
      <div class="invalid-feedback" *ngIf="form.get('email').errors?.email">
        Email không đúng định dạng.
      </div>
    </div>

    <div class="form-group">
      <label for="phoneNumber">Số điện thoại</label>
      <input
        type="text"
        class="form-control"
        id="phoneNumber"
        formControlName="phoneNumber"
        placeholder="Nhập số điện thoại"
        [ngClass]="{
          'is-invalid':
            form.get('phoneNumber').errors &&
            (form.get('phoneNumber').touched || form.get('phoneNumber').dirty)
        }"
      />
      <div
        class="invalid-feedback"
        *ngIf="form.get('phoneNumber').errors?.required"
      >
        Hãy nhập số điện thoại.
      </div>
      <div
        class="invalid-feedback"
        *ngIf="form.get('phoneNumber').errors?.pattern"
      >
        Số điện thoại không đúng định dạng.
      </div>
    </div>

    <div class="form-group">
      <label>Giới tính</label>
      <div class="input-group">
        <div class="custom-control custom-radio custom-control-inline">
          <input
            type="radio"
            class="custom-control-input"
            id="male"
            formControlName="sex"
            value="Nam"
          />
          <label class="custom-control-label" for="male">Nam</label>
        </div>
        <div class="custom-control custom-radio custom-control-inline">
          <input
            type="radio"
            class="custom-control-input"
            id="female"
            formControlName="sex"
            value="Nữ"
          />
          <label class="custom-control-label" for="female">Nữ</label>
        </div>
        <div class="custom-control custom-radio custom-control-inline">
          <input
            type="radio"
            class="custom-control-input"
            id="both"
            formControlName="sex"
            value="Khác"
          />
          <label class="custom-control-label" for="both">Cả hai</label>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="dateOfBirth">Ngày sinh</label>
      <input
        type="text"
        class="form-control"
        id="dateOfBirth"
        formControlName="dateOfBirth"
        [ngClass]="{
          'is-invalid':
            form.get('dateOfBirth').errors &&
            (form.get('dateOfBirth').touched || form.get('dateOfBirth').dirty)
        }"
        bsDatepicker
        [maxDate]="maxDate"
        placement="top"
      />
      <div
        class="invalid-feedback"
        *ngIf="form.get('dateOfBirth').errors?.required"
      >
        Hãy nhập ngày sinh.
      </div>
    </div>

    <button class="btn btn-block btn-primary" [disabled]="form.invalid">
      Cập nhật
    </button>
  </form>

  <ng-template #loading>
    <app-loading></app-loading>
  </ng-template>
</div>
